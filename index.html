<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slime Saturn Chat - Felipe Canneli</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Archivo+Black&family=Space+Mono:wght@700&display=swap');

        :root {
            --acid-green: #39ff14;
            --acid-orange: #ff6600;
            --bg-dark: #080808;
            --depth: 30px;
        }

        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: transparent !important;
            font-family: 'Archivo Black', sans-serif;
            height: 100vh;
            perspective: 2000px; /* Profundidade do cen치rio */
        }

        /* Container do Chat */
        #chat-container {
            position: fixed;
            bottom: 60px;
            left: 60px;
            width: 580px;
            height: 80vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            z-index: 100;
            pointer-events: none;
        }

        /* Estrutura da Mensagem */
        .chat-message {
            position: relative;
            margin-bottom: 100px;
            transform-style: preserve-3d;
            animation: 
                spawn 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards,
                floatSystem 6s ease-in-out infinite alternate;
        }

        /* Backdrop de Slime (Gooey) */
        .slime-backdrop {
            position: absolute;
            inset: -15px;
            filter: url('#gooey');
            z-index: 1;
            transform: translateZ(-5px);
        }

        .slime-blob {
            position: absolute;
            inset: 0;
            background: var(--acid-orange);
            border-radius: 50px;
            box-shadow: 0 0 40px rgba(255, 102, 0, 0.5);
        }

        /* O Bloco de Texto (Corpo do Planeta) */
        .message-body {
            position: relative;
            background: var(--bg-dark);
            border: 6px solid var(--acid-green);
            padding: 25px 35px;
            border-radius: 40px;
            transform: translateZ(var(--depth)); 
            z-index: 50;
            background: linear-gradient(145deg, #151515 0%, #000 100%);
            box-shadow: 0 15px 45px rgba(0,0,0,0.7);
        }

        .user-name {
            display: block;
            color: var(--acid-green);
            font-size: 24px;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 12px;
            background: linear-gradient(90deg, var(--acid-green), #fff, var(--acid-orange));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(4px 4px 0px #000);
        }

        .message-text {
            font-family: 'Space Mono', monospace;
            font-size: 28px;
            color: #ffffff;
            line-height: 1.2;
            word-wrap: break-word;
            text-shadow: 3px 3px 6px rgba(0,0,0,1);
        }

        /* --- SISTEMA DE AN칄IS DE SATURNO --- */
        .ring-system {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 700px;
            height: 700px;
            /* Inclina칞칚o estilo Saturno */
            transform: translate(-50%, -50%) rotateX(75deg) rotateZ(15deg);
            transform-style: preserve-3d;
            z-index: 10;
        }

        .eye-orbiter {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 50px;
            height: 50px;
            transform-style: preserve-3d;
            /* Cada olho ter치 um delay e 칩rbita pr칩prios */
            animation: ringOrbit 6s linear infinite;
        }

        /* O Olho em si (Billboard: compensa a rota칞칚o do anel para olhar p/ c칙mera) */
        .eye-ball {
            width: 45px;
            height: 45px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 20px white;
            transform-style: preserve-3d;
            /* Inverte a inclina칞칚o do anel para ficar de frente */
            animation: billboard 6s linear infinite;
        }

        .eye-ball::after {
            content: "";
            width: 18px;
            height: 18px;
            background: black;
            border-radius: 50%;
            animation: pupilLook 2s infinite ease-in-out;
        }

        /* Delays para distribuir os olhos no anel */
        .eye-orbiter:nth-child(1) { animation-delay: 0s; }
        .eye-orbiter:nth-child(2) { animation-delay: -1.2s; }
        .eye-orbiter:nth-child(3) { animation-delay: -2.4s; }
        .eye-orbiter:nth-child(4) { animation-delay: -3.6s; }
        .eye-orbiter:nth-child(5) { animation-delay: -4.8s; }

        /* --- ANIMA칂칏ES --- */

        @keyframes spawn {
            0% { opacity: 0; transform: scale(0.4) translateZ(-500px) rotateY(-45deg); }
            100% { opacity: 1; transform: scale(1) translateZ(0) rotateY(0deg); }
        }

        @keyframes floatSystem {
            0% { transform: rotateX(5deg) rotateY(-5deg) translateY(0px); }
            50% { transform: rotateX(-5deg) rotateY(10deg) translateY(-30px); }
            100% { transform: rotateX(10deg) rotateY(5deg) translateY(5px); }
        }

        /* 칍rbita no plano do anel */
        @keyframes ringOrbit {
            0% { transform: translate(-50%, -50%) rotate(0deg) translateX(320px); z-index: 200; }
            49% { z-index: 200; }
            50% { transform: translate(-50%, -50%) rotate(180deg) translateX(320px); z-index: -10; }
            99% { z-index: -10; }
            100% { transform: translate(-50%, -50%) rotate(360deg) translateX(320px); z-index: 200; }
        }

        /* Mant칠m o olho de frente para o usu치rio */
        @keyframes billboard {
            0% { transform: rotateZ(0deg) rotateX(-75deg); }
            100% { transform: rotateZ(-360deg) rotateX(-75deg); }
        }

        @keyframes pupilLook {
            0%, 100% { transform: translate(0, 0); }
            25% { transform: translate(7px, -4px); }
            75% { transform: translate(-7px, 4px); }
        }

        .fade-out {
            animation: fadeExit 0.6s forwards;
        }

        @keyframes fadeExit {
            to { opacity: 0; transform: scale(0.6) translateY(-120px) rotateX(45deg); filter: blur(30px); }
        }
    </style>
</head>
<body>

    <svg style="visibility: hidden; position: absolute;" width="0" height="0">
        <defs>
            <filter id="gooey">
                <feGaussianBlur in="SourceGraphic" stdDeviation="15" result="blur" />
                <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 25 -12" result="goo" />
                <feComposite in="SourceGraphic" in2="goo" operator="atop" />
            </filter>
        </defs>
    </svg>

    <div id="chat-container"></div>

    <script>
        const channel = 'felipecanneli';
        const chatContainer = document.getElementById('chat-container');

        function connectTwitchChat() {
            const socket = new WebSocket('wss://irc-ws.chat.twitch.tv:443');

            socket.onopen = () => {
                socket.send('PASS SCHMOOPIIE');
                socket.send('NICK justinfan' + Math.floor(Math.random() * 10000));
                socket.send('JOIN #' + channel);
                
                setTimeout(() => addChatMessage("SATURNO_OS", "SISTEMA DE AN칄IS EST츼VEL. MANDEM MENSAGEM! 游뿛"), 500);
            };

            socket.onmessage = (event) => {
                const message = event.data;
                if (message.includes('PRIVMSG')) {
                    const parts = message.split('PRIVMSG #' + channel + ' :');
                    const userPart = message.split('!')[0];
                    const displayName = userPart.substring(1);
                    const chatMsg = parts[1];
                    addChatMessage(displayName, chatMsg);
                }
                if (message.includes('PING :tmi.twitch.tv')) {
                    socket.send('PONG :tmi.twitch.tv');
                }
            };

            socket.onclose = () => setTimeout(connectTwitchChat, 3000);
        }

        function addChatMessage(user, message) {
            const msgDiv = document.createElement('div');
            msgDiv.className = 'chat-message';

            msgDiv.innerHTML = `
                <div class="ring-system">
                    <div class="eye-orbiter"><div class="eye-ball"></div></div>
                    <div class="eye-orbiter"><div class="eye-ball"></div></div>
                    <div class="eye-orbiter"><div class="eye-ball"></div></div>
                    <div class="eye-orbiter"><div class="eye-ball"></div></div>
                    <div class="eye-orbiter"><div class="eye-ball"></div></div>
                </div>
                <div class="slime-backdrop">
                    <div class="slime-blob"></div>
                </div>
                <div class="message-body">
                    <span class="user-name">${user}</span>
                    <span class="message-text">${message}</span>
                </div>
            `;
            
            chatContainer.appendChild(msgDiv);

            if (chatContainer.childNodes.length > 5) {
                const first = chatContainer.firstChild;
                first.classList.add('fade-out');
                setTimeout(() => first.remove(), 600);
            }

            setTimeout(() => {
                if (msgDiv.parentNode) {
                    msgDiv.classList.add('fade-out');
                    setTimeout(() => msgDiv.remove(), 600);
                }
            }, 30000);
        }

        window.onload = connectTwitchChat;
    </script>
</body>
</html>
